theme_minimal(base_size = 12) +
theme(text = element_text(family = "Symbola"))
p
library(survival)
library(survminer)
# Create survival object
surv_obj <- Surv(time = df_use$Tenure, event = df_use$Churn == "Yes")
# Kaplan–Meier by contract type
fit <- survfit(surv_obj ~ Contract, data = df_use)
# Plot
p <- ggsurvplot(
fit,
data = df_use,
risk.table = TRUE,
pval = TRUE,
xlab = "Tenure (months)",
ylab = "Survival Probability (not churned)",
legend.title = "Contract Type",
# give the table breathing room
risk.table.height = 0.5,       # try 0.24–0.32
risk.table.y.text = TRUE,       # show group labels on the left
risk.table.y.text.col = TRUE,   # color labels by strata
break.time.by = 6               # fewer columns reduces crowding
)
p$plot <- p$plot +
theme_minimal(base_size = 8) +
theme(text = element_text(family = "Symbola"))
p$table <- p$table +
theme_minimal(base_size = 8) +
theme(text = element_text(family = "Symbola"))
p
library(survival)
library(survminer)
# Create survival object
surv_obj <- Surv(time = df_use$Tenure, event = df_use$Churn == "Yes")
# Kaplan–Meier by contract type
fit <- survfit(surv_obj ~ Contract, data = df_use)
# Plot
p <- ggsurvplot(
fit,
data = df_use,
risk.table = TRUE,
pval = TRUE,
xlab = "Tenure (months)",
ylab = "Survival Probability (not churned)",
legend.title = "Contract Type",
# give the table breathing room
risk.table.height = 0.5,       # try 0.24–0.32
risk.table.y.text = TRUE,       # show group labels on the left
risk.table.y.text.col = TRUE,   # color labels by strata
break.time.by = 6,              # fewer columns reduces crowding
ggtheme = theme_minimal(base_size = 12),
tables.theme = theme(
text = element_text(family = "Symbola", size = 10),
axis.text.y = element_text(family = "Symbola")
)
)
p$plot <- p$plot +
theme_minimal(base_size = 8) +
theme(text = element_text(family = "Symbola"))
p$table <- p$table +
theme_minimal(base_size = 8) +
theme(text = element_text(family = "Symbola"))
p
library(survival)
library(survminer)
# Create survival object
surv_obj <- Surv(time = df_use$Tenure, event = df_use$Churn == "Yes")
# Kaplan–Meier by contract type
fit <- survfit(surv_obj ~ Contract, data = df_use)
# Plot
p <- ggsurvplot(
fit,
data = df_use,
risk.table = TRUE,
pval = TRUE,
xlab = "Tenure (months)",
ylab = "Survival Probability (not churned)",
legend.title = "Contract Type",
)
library(survival)
library(survminer)
# Create survival object
surv_obj <- Surv(time = df_use$Tenure, event = df_use$Churn == "Yes")
# Kaplan–Meier by contract type
fit <- survfit(surv_obj ~ Contract, data = df_use)
# Plot
p <- ggsurvplot(
fit,
data = df_use,
risk.table = TRUE,
pval = TRUE,
xlab = "Tenure (months)",
ylab = "Survival Probability (not churned)",
legend.title = "Contract Type",
)
p
library(survival)
library(survminer)
# Create survival object
surv_obj <- Surv(time = df_use$Tenure, event = df_use$Churn == "Yes")
# Kaplan–Meier by contract type
fit <- survfit(surv_obj ~ Contract, data = df_use)
# Plot
p <- ggsurvplot(
fit,
data = df_use,
risk.table = TRUE,
pval = TRUE,
xlab = "Tenure (months)",
ylab = "Survival Probability (not churned)",
legend.title = "Contract Type",
# give the table breathing room
risk.table.height = 0.5,       # try 0.24–0.32
risk.table.y.text = TRUE,       # show group labels on the left
risk.table.y.text.col = TRUE,   # color labels by strata
break.time.by = 6,              # fewer columns reduces crowding
)
p$plot <- p$plot +
theme_minimal(base_size = 12) +
theme(text = element_text(family = "Symbola"))
p$table <- p$table +
theme_minimal(base_size = 12) +
theme(text = element_text(family = "Symbola"))
p
library(survival)
library(survminer)
# Create survival object
surv_obj <- Surv(time = df_use$Tenure, event = df_use$Churn == "Yes")
# Kaplan–Meier by contract type
fit <- survfit(surv_obj ~ Contract, data = df_use)
# Plot
p <- ggsurvplot(
fit,
data = df_use,
risk.table = TRUE,
pval = TRUE,
pval.size = 3,
xlab = "Tenure (months)",
ylab = "Survival Probability (not churned)",
legend.title = "Contract Type",
# give the table breathing room
risk.table.height = 0.5,       # try 0.24–0.32
risk.table.y.text = TRUE,       # show group labels on the left
risk.table.y.text.col = TRUE,   # color labels by strata
break.time.by = 6,              # fewer columns reduces crowding
)
p$plot <- p$plot +
theme_minimal(base_size = 12) +
theme(text = element_text(family = "Symbola"))
p$table <- p$table +
theme_minimal(base_size = 12) +
theme(text = element_text(family = "Symbola", size = 3))
p
#| include: false
#| echo: false
#| error: false
#| message: false
#| label: setup
suppressPackageStartupMessages({
library(dplyr)
library(purrr)
library(tibble)
library(showtext)
library(tidymodels)
library(tidyverse)
library(knitr)
library(kableExtra)
library(reshape2)
library(ggcorrplot)
library(viridis)
library(rstatix)
library(DescTools)
library(FSelectorRcpp)
})
source("../R/utils.R")
source("../R/theme.R")
knitr::opts_chunk$set(
echo = FALSE,     # hide code by default
message = FALSE,
warning = FALSE,
fig.align = "center",
fig.width = 6,
fig.height = 4
)
showtext_auto()
#| include: false
#| echo: false
#| error: false
#| message: false
#| label: setup
suppressPackageStartupMessages({
library(dplyr)
library(purrr)
library(tibble)
library(showtext)
library(tidymodels)
library(tidyverse)
library(knitr)
library(kableExtra)
library(reshape2)
library(ggcorrplot)
library(viridis)
library(rstatix)
library(DescTools)
library(FSelectorRcpp)
})
source("../R/utils.R")
source("../R/theme.R")
knitr::opts_chunk$set(
echo = FALSE,     # hide code by default
message = FALSE,
warning = FALSE,
fig.align = "center",
fig.width = 6,
fig.height = 4
)
if (knitr::is_latex_output()) {
theme_set(
theme_minimal(base_size = 14, base_family = "Symbola") +
theme(
plot.title   = element_text(face = "bold", size = 16, hjust = 0.5),
axis.title   = element_text(size = 14),
axis.text    = element_text(size = 12),
legend.title = element_text(size = 13),
legend.text  = element_text(size = 11)
)
)
}
library(ggplot2)
if (knitr::is_html_output()) {
theme_set(
theme_minimal(base_size = 20) +  # bump base_size (try 16–18 for HTML)
theme(
plot.title   = element_text(face = "bold", size = 20, hjust = 0.5),
axis.title   = element_text(size = 16),
axis.text    = element_text(size = 14),
legend.title = element_text(size = 15),
legend.text  = element_text(size = 13)
)
)
knitr::opts_chunk$set(
fig.width  = 8,   # in inches
fig.height = 5,
dpi        = 120  # controls sharpness
)
}
#| include: false
#| echo: false
#| error: false
#| message: false
#| label: setup
suppressPackageStartupMessages({
library(dplyr)
library(purrr)
library(tibble)
library(showtext)
library(tidymodels)
library(tidyverse)
library(knitr)
library(kableExtra)
library(reshape2)
library(ggcorrplot)
library(viridis)
library(rstatix)
library(DescTools)
library(FSelectorRcpp)
})
source("../R/utils.R")
source("../R/theme.R")
font_add("Symbola", "/usr/share/fonts/TTF/Symbola.ttf")
showtext_auto()
knitr::opts_chunk$set(
echo = FALSE,     # hide code by default
message = FALSE,
warning = FALSE,
fig.align = "center",
fig.width = 6,
fig.height = 4
)
if (knitr::is_latex_output()) {
# device for plots inside the doc
knitr::opts_chunk$set(dev = "cairo_pdf")
showtext_auto()
theme_set(
theme_minimal(base_size = 14, base_family = "Symbola") +
theme(
plot.title   = element_text(face = "bold", size = 16, hjust = 0.5),
axis.title   = element_text(size = 14),
axis.text    = element_text(size = 12),
legend.title = element_text(size = 13),
legend.text  = element_text(size = 11)
)
)
}
if (knitr::is_html_output()) {
theme_set(
theme_minimal(base_size = 20) +  # bump base_size (try 16–18 for HTML)
theme(
plot.title   = element_text(face = "bold", size = 20, hjust = 0.5),
axis.title   = element_text(size = 16),
axis.text    = element_text(size = 14),
legend.title = element_text(size = 15),
legend.text  = element_text(size = 13)
)
)
knitr::opts_chunk$set(
fig.width  = 8,   # in inches
fig.height = 5,
dpi        = 120  # controls sharpness
)
}
library(survival)
library(survminer)
# Create survival object
surv_obj <- Surv(time = df_use$Tenure, event = df_use$Churn == "Yes")
# Kaplan–Meier by contract type
fit <- survfit(surv_obj ~ Contract, data = df_use)
# Plot
p <- ggsurvplot(
fit,
data = df_use,
risk.table = TRUE,
pval = TRUE,
pval.size = 3,
xlab = "Tenure (months)",
ylab = "Survival Probability (not churned)",
legend.title = "Contract Type",
# give the table breathing room
risk.table.height = 0.3,       # try 0.24–0.32
risk.table.y.text = TRUE,       # show group labels on the left
risk.table.y.text.col = TRUE,   # color labels by strata
break.time.by = 6,              # fewer columns reduces crowding
)
p
library(survival)
library(survminer)
# Create survival object
surv_obj <- Surv(time = df_use$Tenure, event = df_use$Churn == "Yes")
# Kaplan–Meier by contract type
fit <- survfit(surv_obj ~ Contract, data = df_use)
# Plot
p <- ggsurvplot(
fit,
data = df_use,
risk.table = TRUE,
pval = TRUE,
pval.size = 3,
xlab = "Tenure (months)",
ylab = "Survival Probability (not churned)",
legend.title = "Contract Type",
# give the table breathing room
risk.table.height = 0.3,       # try 0.24–0.32
risk.table.y.text = TRUE,       # show group labels on the left
risk.table.y.text.col = TRUE,   # color labels by strata
break.time.by = 6,              # fewer columns reduces crowding
)
p$plot + latex_font_theme()
library(survival)
library(survminer)
# Create survival object
surv_obj <- Surv(time = df_use$Tenure, event = df_use$Churn == "Yes")
# Kaplan–Meier by contract type
fit <- survfit(surv_obj ~ Contract, data = df_use)
# Plot
p <- ggsurvplot(
fit,
data = df_use,
risk.table = TRUE,
pval = TRUE,
pval.size = 3,
xlab = "Tenure (months)",
ylab = "Survival Probability (not churned)",
legend.title = "Contract Type",
# give the table breathing room
risk.table.height = 0.3,       # try 0.24–0.32
risk.table.y.text = TRUE,       # show group labels on the left
risk.table.y.text.col = TRUE,   # color labels by strata
break.time.by = 6,              # fewer columns reduces crowding
ggtheme = theme_minimal() +
theme(
legend.text = element_text(size = 6),
legend.title = element_text(size = 6)
) + latex_font_theme()
)
library(survival)
library(survminer)
# Create survival object
surv_obj <- Surv(time = df_use$Tenure, event = df_use$Churn == "Yes")
# Kaplan–Meier by contract type
fit <- survfit(surv_obj ~ Contract, data = df_use)
# Plot
p <- ggsurvplot(
fit,
data = df_use,
risk.table = TRUE,
pval = TRUE,
pval.size = 3,
xlab = "Tenure (months)",
ylab = "Survival Probability (not churned)",
legend.title = "Contract Type",
# give the table breathing room
risk.table.height = 0.3,       # try 0.24–0.32
risk.table.y.text = TRUE,       # show group labels on the left
risk.table.y.text.col = TRUE,   # color labels by strata
break.time.by = 6,              # fewer columns reduces crowding
ggtheme = theme_minimal() +
theme(
legend.text = element_text(size = 6),
legend.title = element_text(size = 6)
) + latex_font_theme()
)
p$plot
library(survival)
library(survminer)
# Create survival object
surv_obj <- Surv(time = df_use$Tenure, event = df_use$Churn == "Yes")
# Kaplan–Meier by contract type
fit <- survfit(surv_obj ~ Contract, data = df_use)
# Plot
p <- ggsurvplot(
fit,
data = df_use,
risk.table = TRUE,
pval = TRUE,
pval.size = 3,
xlab = "Tenure (months)",
ylab = "Survival Probability (not churned)",
legend.title = "Contract Type",
# give the table breathing room
risk.table.height = 0.3,       # try 0.24–0.32
risk.table.y.text = TRUE,       # show group labels on the left
risk.table.y.text.col = TRUE,   # color labels by strata
break.time.by = 6,              # fewer columns reduces crowding
ggtheme = theme_minimal() + latex_font_theme()
)
p$plot; p$table
library(survival)
library(survminer)
# Create survival object
surv_obj <- Surv(time = df_use$Tenure, event = df_use$Churn == "Yes")
# Kaplan–Meier by contract type
fit <- survfit(surv_obj ~ Contract, data = df_use)
# Plot
p <- ggsurvplot(
fit,
data = df_use,
risk.table = TRUE,
pval = TRUE,
pval.size = 3,
xlab = "Tenure (months)",
ylab = "Survival Probability (not churned)",
legend.title = "Contract Type",
# give the table breathing room
risk.table.height = 0.3,       # try 0.24–0.32
risk.table.y.text = TRUE,       # show group labels on the left
risk.table.y.text.col = TRUE,   # color labels by strata
break.time.by = 6,              # fewer columns reduces crowding
ggtheme = theme_minimal() + latex_font_theme()
)
p$plot
p$table |>
print_table()
library(survival)
library(survminer)
# Create survival object
surv_obj <- Surv(time = df_use$Tenure, event = df_use$Churn == "Yes")
# Kaplan–Meier by contract type
fit <- survfit(surv_obj ~ Contract, data = df_use)
# Plot
p <- ggsurvplot(
fit,
data = df_use,
risk.table = TRUE,
pval = TRUE,
pval.size = 3,
xlab = "Tenure (months)",
ylab = "Survival Probability (not churned)",
legend.title = "Contract Type",
# give the table breathing room
risk.table.height = 0.3,       # try 0.24–0.32
risk.table.y.text = TRUE,       # show group labels on the left
risk.table.y.text.col = TRUE,   # color labels by strata
break.time.by = 6,              # fewer columns reduces crowding
ggtheme = theme_minimal() + latex_font_theme()
)
p$plot;p$table
library(survival)
library(survminer)
# Create survival object
surv_obj <- Surv(time = df_use$Tenure, event = df_use$Churn == "Yes")
# Kaplan–Meier by contract type
fit <- survfit(surv_obj ~ Contract, data = df_use)
# Plot
p <- ggsurvplot(
fit,
data = df_use,
risk.table = TRUE,
pval = TRUE,
pval.size = 3,
xlab = "Tenure (months)",
ylab = "Survival Probability (not churned)",
legend.title = "Contract Type",
# give the table breathing room
risk.table.height = 0.3,       # try 0.24–0.32
risk.table.y.text = TRUE,       # show group labels on the left
risk.table.y.text.col = TRUE,   # color labels by strata
break.time.by = 6,              # fewer columns reduces crowding
tables.theme = theme_cleantable(),
ggtheme = theme_minimal() + latex_font_theme()
)
p$plot;p$table
